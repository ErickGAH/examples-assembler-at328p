;solo muestra una configuracion sencilla del uso de temporizador
 .org 0X00
	JMP INICIO
.ORG 0X016
	JMP RUTINA_SERVICIO_TIMER1_COMP

RUTINA_SERVICIO_TIMER1_COMP:
						PUSH R18		;GUARDA VALOR DE REG UTILIZADO
						IN R18, SREG
						PUSH R18
						LDI R18, 0XFF
						EOR R17, R18		;NOTIFICA TODOS LOS BITS DEL PUERTO B
						OUT PORTB, R17

						POP R18
						OUT SREG, R18
						POP R18			;RECUPERA VALOR DE REG UTILIZADO
						RET

INICIO:
		LDI R16, HIGH(RAMEND)		;CONFIGURA STACK EN PARTE ALTA DE SRAM
		OUT SPH, R16
		LDI R16, LOW(RAMEND)
		OUT SPL, R16

			LDI R16, 0XFF		;CONGI PUERTO B COO SALIDA
			OUT DDRB, R16

			LDS R16, TCCR1B
			ORI R16, 0X08
			STS TCCR1B, R16		;CONFIG TIMER EN MODO CTC

			LDS R16, TCCR1B		
			ORI R16, 0X05		;CONFIG TIMER PARA CLK/1024
			STS TCCR1B, R16

							;DIVISOR DEBERIA SER 0X30FF CON DIVISOR DE 1024
			LDI R16, 0X3D		;FIJA VALOR DE COMPARACION CTC PARTE ALTA 
			
				STS OCR1AH, R16
			LDI R16, 0XFF

				STS OCR1AL, R16


				LDS R16, TIMSK1		;HABILITA INTERRUPCION POR COMPARACION
				ORI R16, 0X02		;EN EL TIMER1
				STS TIMSK1, R16

				LDI R17, 0X0F		;VALOR INICIAL PUERTO B
							;ESTE REGISTRO SE RESERVA PARA LA RUTINA DE SERVICIO DE INTERRUPCION
				SEI			;HABILITA INTERRUPCIONES GENERALES

LAZO:
		NOP
		RJMP LAZO
